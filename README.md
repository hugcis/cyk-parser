# MVA - Algorithms for Speech and NLP TD 2 (NLP)

## How to run the parser

The parser can be run with the command `./run.sh`.
This command reads tokenized sentences (one sentence per line, one space
between each token) from standard input by default or from a file if specified.

Since the script writes some information to stdout, the output generated by the
parser is automatically written to a file named `evaluation_data.parser_output`,
but an other can be specified with the optional parameter `-o`.

The folder `data/` contains a train, validation and test file. They were
randomly generated with the script `split_data.py` but the random seed makes the
output reproducible. For the validation and test files, a tokenized version generated
with the script `tokenize_files.py` were also generated for development and testing
purposes.

Default grammar and lexicon were trained on `train_data.mrg_strict` and are saved as
pickle files `grammar.pkl` and `lexicon.pkl` but can be retrained from a custom file
before parsing using the option `-tf`  of `run.sh` (This option will overwrite the two
default files !).

The detailed  parser documentation is specified below.

```text
Parse dependencies of sentences from stdin

First argument if given is the input filename containing the tokenized sentences to be parsed.
Optional arguments:
    -tf | --train-file filename    The file containing the sentences to learn a
                                   new PCFG on.
    -o  | --output-file            Output file where the sentences are generated
    -h  | --help                   Show this help message
    -n  | --n-proc                 Number of parallel processes to use. Default is
                                   given by Python's os.cpu_count()

Example usage:
    ./run.sh input_tokenized -tf train_sentences.mrg_strict -o evaluation_data.parser_output
```

**For the script to properly run, the `polyglot-fr.pkl` file containing the polyglot french
word embeddings must be present.** They can be downloaded at the URL
 [https://sites.google.com/site/rmyeid/projects/polyglot](https://sites.google.com/site/rmyeid/projects/polyglot).